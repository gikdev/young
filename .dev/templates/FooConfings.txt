using Microsoft.EntityFrameworkCore.Metadata.Builders;

namespace _____;

internal class FooConfigs : EntityBaseConfig<Foo> {
    public override void Configure(EntityTypeBuilder<Foo> builder) {
        base.Configure(builder);

        builder.Property(x => x.Name).IsRequired();
        builder.Property(x => x.IsGlobal).IsRequired();
        builder.Property(x => x.Code).IsRequired(false);
        builder.Property(x => x.TemplateDocId).IsRequired(false);
        builder.Property(x => x.TemplateExcelId).IsRequired(false);

        // builder.Property(x => x.SomeEnum).HasConversion(
        //     someEnum => someEnum.Value,
        //     value => SomeEnum.FromValue(value)
        // );

        // builder.Property(x => x.ItemsThatShouldBeJson).HasConversion(
        //     refs => SettingsAclMappings.MapToJsonString(refs),
        //     str => SettingsAclMappings.MapFromJsonString(str)
        // );
        // builder.Property(x => x.ItemsThatShouldBeJson).Metadata.SetValueComparer(new ValueComparer<IReadOnlyList<TypeThatShouldBeJson>>(
        //     (c1, c2) => (c1 == null && c2 == null) ||
        //                 (c1 != null && c2 != null && c1.SequenceEqual(c2)),
        //     c => c == null ? 0 : c.Aggregate(0, (a, v) => HashCode.Combine(a, v.GetHashCode())),
        //     c => c.ToList() ?? new List<TypeThatShouldBeJson>()
        // ));
    }
}
